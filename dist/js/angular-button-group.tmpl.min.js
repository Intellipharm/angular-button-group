!function(){"use strict";angular.module("AngularButtonGroup",[])}(),angular.module("AngularButtonGroup",[]).run(["$templateCache",function(n){n.put("html/angular-button-group.html",'<div class="angular-button-group" ng-show="is_visible"><div ng-repeat="button in config" class="group" ng-class="{\'disabled\': button.disabled}" ng-show="button.visible"><div ng-show="!button.show_confirm_group"><button ng-class="button.button_class[button.button_class_index]" ng-click="ctrl.onClick(button)">{{button.label[button.label_index]}}</button></div><div ng-show="button.show_confirm_group"><div ng-class="button.confirm_label_class" ng-show="button.confirm_message">{{button.confirm_message}}</div><div ng-class="button.confirm_group_class"><button ng-class="button.confirm_yes_button_class" ng-click="ctrl.onYesClick(button)">{{button.confirm_yes_label}}</button> <button ng-class="button.confirm_no_button_class" ng-click="ctrl.onNoClick(button)">{{button.confirm_no_label}}</button></div></div></div></div>')}]),function(){"use strict";var n=function(n){this.api=n.api||{},this.show_confirm_group=!1,this.onClick=function(o){o.disabled=!1,o.label.length>1&&++o.label_index===o.label.length&&(o.label_index=0),o.button_class.length>1&&++o.button_class_index===o.button_class.length&&(o.button_class_index=0),_.forEach(n.config,function(n,t){n!==o&&(n.show_confirm_group=!1)}),o.disable_others&&_.forEach(n.config,function(n,t){n!==o&&(n.disabled=!0)}),o.confirm&&(o.busy_confirming=!0,o.show_confirm_group=!0),_.isNull(o.callback)||o.callback(o,o.busy_confirming)},this.onYesClick=function(o){o.show_confirm_group=!1,o.busy_confirming=!1,o.disable_others&&_.forEach(n.config,function(n,t){n!==o&&(n.disabled=!1)}),_.isNull(o.callback)||o.callback(o,!1,!0)},this.onNoClick=function(o){o.disable_others&&_.forEach(n.config,function(n,t){n!==o&&(n.disabled=!1)}),o.show_confirm_group=!1,o.busy_confirming=!1,_.isNull(o.callback)||o.callback(o,!1,!1)},this.api.reset=function(){_.forEach(n.config,function(n,o){n.show_confirm_group=!1,n.busy_confirming=!1,n.disabled=!1})}};n.$inject=["$scope"],angular.module("AngularButtonGroup").controller("AngularButtonGroupCtrl",n)}(),function(){"use strict";var n=function(){return{restrict:"EA",scope:{is_visible:"=isVisible",config:"=",api:"="},controller:"AngularButtonGroupCtrl as ctrl",link:function(n,o,t,l){var i={button_class:[],button_class_index:0,busy_confirming:!1,label:[],label_index:0,callback:null,confirm:!1,confirm_group_class:"",confirm_label_class:"",confirm_message:null,confirm_no_label:"NO",confirm_no_button_class:"",confirm_yes_label:"YES",confirm_yes_button_class:"",disable_others:!1,visible:!0};n.$watch("config",function(n){if(!_.isUndefined(n)){if(!_.has(n,"reset")&&n.reset)return console.log("reset"),n.reset=!1,l.reset(),!0;_.forEach(n,function(n,o,t){_.isArray(n.label)||(n.label=[n.label]),_.isArray(n.button_class)||(n.button_class=[n.button_class]),t[o]=_.merge(_.clone(i,!0),n)})}},!0),n.$watch("reset",function(o){_.isUndefined(o)||o&&(n.reset=!1,l.reset())},!0)},replace:!0,templateUrl:"html/angular-button-group.html"}};n.$inject=[],angular.module("AngularButtonGroup").directive("angularButtonGroup",n)}(),function(){"use strict";angular.module("AngularButtonGroup").constant("ANGULAR_BUTTON_GROUP_CLASS","aaa")}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItYnV0dG9uLWdyb3VwLmpzIiwidGVtcGxhdGVzL2FuZ3VsYXItYnV0dG9uLWdyb3VwLXRlbXBsYXRlcy5qcyIsImFuZ3VsYXItYnV0dG9uLWdyb3VwLWNvbnRyb2xsZXIuanMiLCJhbmd1bGFyLWJ1dHRvbi1ncm91cC1kaXJlY3RpdmUuanMiLCJhbmd1bGFyLWJ1dHRvbi1ncm91cC1zZXR0aW5ncy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwicnVuIiwiJHRlbXBsYXRlQ2FjaGUiLCJwdXQiLCJjb250cm9sbGVyIiwiJHMiLCJ0aGlzIiwiYXBpIiwic2hvd19jb25maXJtX2dyb3VwIiwib25DbGljayIsImJ1dHRvbiIsImRpc2FibGVkIiwibGFiZWwiLCJsZW5ndGgiLCJsYWJlbF9pbmRleCIsImJ1dHRvbl9jbGFzcyIsImJ1dHRvbl9jbGFzc19pbmRleCIsIl8iLCJmb3JFYWNoIiwiY29uZmlnIiwiaXRlbSIsImtleSIsImRpc2FibGVfb3RoZXJzIiwiY29uZmlybSIsImJ1c3lfY29uZmlybWluZyIsImlzTnVsbCIsImNhbGxiYWNrIiwib25ZZXNDbGljayIsIm9uTm9DbGljayIsInJlc2V0IiwiJGluamVjdCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0Iiwic2NvcGUiLCJpc192aXNpYmxlIiwibGluayIsImVsZW1lbnQiLCJhdHRycyIsImRlZmF1bHRfY29uZmlnIiwiY29uZmlybV9ncm91cF9jbGFzcyIsImNvbmZpcm1fbGFiZWxfY2xhc3MiLCJjb25maXJtX21lc3NhZ2UiLCJjb25maXJtX25vX2xhYmVsIiwiY29uZmlybV9ub19idXR0b25fY2xhc3MiLCJjb25maXJtX3llc19sYWJlbCIsImNvbmZpcm1feWVzX2J1dHRvbl9jbGFzcyIsInZpc2libGUiLCIkd2F0Y2giLCJ2YWwiLCJpc1VuZGVmaW5lZCIsImhhcyIsImNvbnNvbGUiLCJsb2ciLCJvYmoiLCJpc0FycmF5IiwibWVyZ2UiLCJjbG9uZSIsInJlcGxhY2UiLCJ0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UixRQUlBSyxFQUFBcUMsUUFBQWxDLEVBQUFMLGdCQUNBSyxFQUFBTCxjQUFBSyxFQUFBTCxlQUlBc0MsRUFBQWhDLEdBQUFKLEVBQUFzQyxNQUFBdEMsRUFBQXVDLE1BQUFsQixHQUFBLEdBQUFsQixRQUdBLEdBRUFhLEVBQUFjLE9BQUEsUUFBQSxTQUFBQyxHQUNBL0IsRUFBQWdDLFlBQUFELElBQ0FBLElBQ0FmLEVBQUFKLE9BQUEsRUFDQXpCLEVBQUF5QixXQUdBLElBRUE0QixTQUFBLEVBQ0FDLFlBQUEsa0NBSUEzQixHQUFBRCxXQUVBL0IsUUFBQUMsT0FBQSxzQkFDQStCLFVBQUEscUJBQUFBLE1DM0ZBLFdBRUEsWUFNQWhDLFNBQUFDLE9BQUEsc0JBQ0EyRCxTQUFBLDZCQUFBIiwiZmlsZSI6ImFuZ3VsYXItYnV0dG9uLWdyb3VwLnRtcGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBBbmd1bGFyIEJ1dHRvbiBHcm91cFxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ0FuZ3VsYXJCdXR0b25Hcm91cCcsIFtdKTtcblxufSkoKTtcbiIsImFuZ3VsYXIubW9kdWxlKFwiQW5ndWxhckJ1dHRvbkdyb3VwXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHskdGVtcGxhdGVDYWNoZS5wdXQoXCJodG1sL2FuZ3VsYXItYnV0dG9uLWdyb3VwLmh0bWxcIixcIjxkaXYgY2xhc3M9XFxcImFuZ3VsYXItYnV0dG9uLWdyb3VwXFxcIiBuZy1zaG93PVxcXCJpc192aXNpYmxlXFxcIj48ZGl2IG5nLXJlcGVhdD1cXFwiYnV0dG9uIGluIGNvbmZpZ1xcXCIgY2xhc3M9XFxcImdyb3VwXFxcIiBuZy1jbGFzcz1cXFwie1xcJ2Rpc2FibGVkXFwnOiBidXR0b24uZGlzYWJsZWR9XFxcIiBuZy1zaG93PVxcXCJidXR0b24udmlzaWJsZVxcXCI+PGRpdiBuZy1zaG93PVxcXCIhYnV0dG9uLnNob3dfY29uZmlybV9ncm91cFxcXCI+PGJ1dHRvbiBuZy1jbGFzcz1cXFwiYnV0dG9uLmJ1dHRvbl9jbGFzc1tidXR0b24uYnV0dG9uX2NsYXNzX2luZGV4XVxcXCIgbmctY2xpY2s9XFxcImN0cmwub25DbGljayhidXR0b24pXFxcIj57e2J1dHRvbi5sYWJlbFtidXR0b24ubGFiZWxfaW5kZXhdfX08L2J1dHRvbj48L2Rpdj48ZGl2IG5nLXNob3c9XFxcImJ1dHRvbi5zaG93X2NvbmZpcm1fZ3JvdXBcXFwiPjxkaXYgbmctY2xhc3M9XFxcImJ1dHRvbi5jb25maXJtX2xhYmVsX2NsYXNzXFxcIiBuZy1zaG93PVxcXCJidXR0b24uY29uZmlybV9tZXNzYWdlXFxcIj57e2J1dHRvbi5jb25maXJtX21lc3NhZ2V9fTwvZGl2PjxkaXYgbmctY2xhc3M9XFxcImJ1dHRvbi5jb25maXJtX2dyb3VwX2NsYXNzXFxcIj48YnV0dG9uIG5nLWNsYXNzPVxcXCJidXR0b24uY29uZmlybV95ZXNfYnV0dG9uX2NsYXNzXFxcIiBuZy1jbGljaz1cXFwiY3RybC5vblllc0NsaWNrKGJ1dHRvbilcXFwiPnt7YnV0dG9uLmNvbmZpcm1feWVzX2xhYmVsfX08L2J1dHRvbj4gPGJ1dHRvbiBuZy1jbGFzcz1cXFwiYnV0dG9uLmNvbmZpcm1fbm9fYnV0dG9uX2NsYXNzXFxcIiBuZy1jbGljaz1cXFwiY3RybC5vbk5vQ2xpY2soYnV0dG9uKVxcXCI+e3tidXR0b24uY29uZmlybV9ub19sYWJlbH19PC9idXR0b24+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+XCIpO31dKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBBbmd1bGFyIEJ1dHRvbiBHcm91cCBjb250cm9sbGVyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICB2YXIgY29udHJvbGxlciA9IGZ1bmN0aW9uICgkcykge1xuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5hcGkgPSAkcy5hcGkgfHwge307XG4gICAgICAgIHRoaXMuc2hvd19jb25maXJtX2dyb3VwID0gZmFsc2U7XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBoYW5kbGVyc1xuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIG9uQ2xpY2tcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkNsaWNrID0gZnVuY3Rpb24oYnV0dG9uKSB7XG5cbiAgICAgICAgICAgIC8vIGVuYWJsZVxuICAgICAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIGlmIG11bHRpcGxlIGxhYmVscyB0aGVuIGN5Y2xlXG4gICAgICAgICAgICBpZiAoYnV0dG9uLmxhYmVsLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoKytidXR0b24ubGFiZWxfaW5kZXggPT09IGJ1dHRvbi5sYWJlbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmxhYmVsX2luZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIG11bHRpcGxlIGNsYXNzZXMgdGhlbiBjeWNsZVxuICAgICAgICAgICAgaWYgKGJ1dHRvbi5idXR0b25fY2xhc3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGlmICgrK2J1dHRvbi5idXR0b25fY2xhc3NfaW5kZXggPT09IGJ1dHRvbi5idXR0b25fY2xhc3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5idXR0b25fY2xhc3NfaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc3RvcCBvdGhlcnMgdGhhdCBhcmUgY29uZmlybWluZ1xuICAgICAgICAgICAgXy5mb3JFYWNoKCRzLmNvbmZpZywgZnVuY3Rpb24oaXRlbSwga2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0gIT09IGJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnNob3dfY29uZmlybV9ncm91cCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBkaXNhYmxlIG90aGVycz9cbiAgICAgICAgICAgIGlmIChidXR0b24uZGlzYWJsZV9vdGhlcnMpIHtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goJHMuY29uZmlnLCBmdW5jdGlvbihpdGVtLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gIT09IGJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVxdWlyZXMgY29uZmlybWF0aW9uP1xuICAgICAgICAgICAgaWYgKGJ1dHRvbi5jb25maXJtKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmJ1c3lfY29uZmlybWluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnNob3dfY29uZmlybV9ncm91cCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGV4dGVybmFsIGhhbmRsZXJcbiAgICAgICAgICAgIGlmICghXy5pc051bGwoYnV0dG9uLmNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5jYWxsYmFjayhidXR0b24sIGJ1dHRvbi5idXN5X2NvbmZpcm1pbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBvblllc0NsaWNrXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBidXR0b25cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25ZZXNDbGljayA9IGZ1bmN0aW9uKGJ1dHRvbikge1xuXG4gICAgICAgICAgICBidXR0b24uc2hvd19jb25maXJtX2dyb3VwID0gZmFsc2U7XG4gICAgICAgICAgICBidXR0b24uYnVzeV9jb25maXJtaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIGRpc2FibGUgb3RoZXJzP1xuICAgICAgICAgICAgaWYgKGJ1dHRvbi5kaXNhYmxlX290aGVycykge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaCgkcy5jb25maWcsIGZ1bmN0aW9uKGl0ZW0sIGtleSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSAhPT0gYnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZXh0ZXJuYWwgaGFuZGxlclxuICAgICAgICAgICAgaWYgKCFfLmlzTnVsbChidXR0b24uY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmNhbGxiYWNrKGJ1dHRvbiwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBvbk5vQ2xpY2tcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbk5vQ2xpY2sgPSBmdW5jdGlvbihidXR0b24pIHtcblxuICAgICAgICAgICAgLy8gZGlzYWJsZSBvdGhlcnM/XG4gICAgICAgICAgICBpZiAoYnV0dG9uLmRpc2FibGVfb3RoZXJzKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKCRzLmNvbmZpZywgZnVuY3Rpb24oaXRlbSwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtICE9PSBidXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidXR0b24uc2hvd19jb25maXJtX2dyb3VwID0gZmFsc2U7XG4gICAgICAgICAgICBidXR0b24uYnVzeV9jb25maXJtaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIGV4dGVybmFsIGhhbmRsZXJcbiAgICAgICAgICAgIGlmICghXy5pc051bGwoYnV0dG9uLmNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5jYWxsYmFjayhidXR0b24sIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBhcGlcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICAgIHRoaXMuYXBpLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfLmZvckVhY2goJHMuY29uZmlnLCBmdW5jdGlvbihpdGVtLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBpdGVtLnNob3dfY29uZmlybV9ncm91cCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGl0ZW0uYnVzeV9jb25maXJtaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaXRlbS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJ107XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnQW5ndWxhckJ1dHRvbkdyb3VwJykuY29udHJvbGxlcignQW5ndWxhckJ1dHRvbkdyb3VwQ3RybCcsIGNvbnRyb2xsZXIpO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBhbmd1bGFyLWJ1dHRvbi1ncm91cCBkaXJlY3RpdmVcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIHZhciBkaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICAgIGlzX3Zpc2libGU6IFwiPWlzVmlzaWJsZVwiLFxuICAgICAgICAgICAgICAgIGNvbmZpZzogICAgIFwiPVwiLFxuICAgICAgICAgICAgICAgIGFwaTogICAgICAgIFwiPVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlcjogXCJBbmd1bGFyQnV0dG9uR3JvdXBDdHJsIGFzIGN0cmxcIixcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcikge1xuXG4gICAgICAgICAgICAgICAgLy8gZGVmYXVsdHNcbiAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdF9jb25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbl9jbGFzczogW10sXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbl9jbGFzc19pbmRleDogMCxcbiAgICAgICAgICAgICAgICAgICAgYnVzeV9jb25maXJtaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFtdLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbF9pbmRleDogMCxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm06IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maXJtX2dyb3VwX2NsYXNzOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBjb25maXJtX2xhYmVsX2NsYXNzOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBjb25maXJtX21lc3NhZ2U6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1fbm9fbGFiZWw6IFwiTk9cIixcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybV9ub19idXR0b25fY2xhc3M6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1feWVzX2xhYmVsOiBcIllFU1wiLFxuICAgICAgICAgICAgICAgICAgICBjb25maXJtX3llc19idXR0b25fY2xhc3M6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVfb3RoZXJzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gd2F0Y2hlcnNcbiAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goJ2NvbmZpZycsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV8uaXNVbmRlZmluZWQodmFsKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfLmhhcyh2YWwsICdyZXNldCcpICYmIHZhbC5yZXNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVzZXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsLnJlc2V0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0XG4gICAgICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2godmFsLCBmdW5jdGlvbihpdGVtLCBrZXksIG9iaikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJhbnNmb3JtIGxhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfLmlzQXJyYXkoaXRlbS5sYWJlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5sYWJlbCA9IFtpdGVtLmxhYmVsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gYnV0dG9uX2NsYXNzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfLmlzQXJyYXkoaXRlbS5idXR0b25fY2xhc3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYnV0dG9uX2NsYXNzID0gW2l0ZW0uYnV0dG9uX2NsYXNzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtZXJnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtrZXldID0gXy5tZXJnZShfLmNsb25lKGRlZmF1bHRfY29uZmlnLCB0cnVlKSwgaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKCdyZXNldCcsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV8uaXNVbmRlZmluZWQodmFsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnJlc2V0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnaHRtbC9hbmd1bGFyLWJ1dHRvbi1ncm91cC5odG1sJ1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBkaXJlY3RpdmUuJGluamVjdCA9IFtdO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ0FuZ3VsYXJCdXR0b25Hcm91cCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2FuZ3VsYXJCdXR0b25Hcm91cCcsIGRpcmVjdGl2ZSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBBbmd1bGFyIEJ1dHRvbiBHcm91cCBzZXR0aW5nc1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ0FuZ3VsYXJCdXR0b25Hcm91cCcpXG4gICAgICAgIC5jb25zdGFudCgnQU5HVUxBUl9CVVRUT05fR1JPVVBfQ0xBU1MnLCAgICAgICAgICAgICAgIFwiYWFhXCIpO1xuXG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9